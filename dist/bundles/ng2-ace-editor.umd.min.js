!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("brace"),require("brace/theme/monokai"),require("brace/mode/html"),require("@angular/forms")):"function"==typeof define&&define.amd?define(["exports","@angular/core","brace","brace/theme/monokai","brace/mode/html","@angular/forms"],e):e((t.ng=t.ng||{},t.ng.ng2aceeditor={}),t.ng.core,null,null,null,t.ng.forms)}(this,function(t,e,o,i,n,r){"use strict";var s=function(){function t(t){this.textChanged=new e.EventEmitter,this.textChange=new e.EventEmitter,this._options={},this._readOnly=!1,this._theme="monokai",this._mode="html",this._autoUpdateContent=!0,this._durationBeforeCallback=0,this._text="";var o=t.nativeElement;this.editor=ace.edit(o),this.editor.$blockScrolling=1/0}return t.prototype.ngOnInit=function(){this.init(),this.initEvents()},t.prototype.init=function(){this.editor.setOptions(this._options||{}),this.editor.setTheme("ace/theme/"+this._theme),this.setMode(this._mode),this.editor.setReadOnly(this._readOnly)},t.prototype.initEvents=function(){var t=this;this.editor.on("change",function(){return t.updateText()}),this.editor.on("paste",function(){return t.updateText()})},t.prototype.updateText=function(){var t=this.editor.getValue(),e=this;t!==this.oldText&&(this._durationBeforeCallback?(null!=this.timeoutSaving&&clearTimeout(this.timeoutSaving),this.timeoutSaving=setTimeout(function(){e._text=t,e.textChange.emit(t),e.textChanged.emit(t),e.timeoutSaving=null},this._durationBeforeCallback)):(this._text=t,this.textChange.emit(t),this.textChanged.emit(t)),this.oldText=t)},Object.defineProperty(t.prototype,"options",{set:function(t){this._options=t,this.editor.setOptions(t||{})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readOnly",{set:function(t){this._readOnly=t,this.editor.setReadOnly(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"theme",{set:function(t){this._theme=t,this.editor.setTheme("ace/theme/"+t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mode",{set:function(t){this.setMode(t)},enumerable:!0,configurable:!0}),t.prototype.setMode=function(t){this._mode=t,"object"==typeof this._mode?this.editor.getSession().setMode(this._mode):this.editor.getSession().setMode("ace/mode/"+this._mode)},Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(t){this.setText(t)},enumerable:!0,configurable:!0}),t.prototype.setText=function(t){this._text!==t&&(null!==t&&void 0!==t||(t=""),!0===this._autoUpdateContent&&(this._text=t,this.editor.setValue(t),this.editor.clearSelection()))},Object.defineProperty(t.prototype,"autoUpdateContent",{set:function(t){this._autoUpdateContent=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"durationBeforeCallback",{set:function(t){this.setDurationBeforeCallback(t)},enumerable:!0,configurable:!0}),t.prototype.setDurationBeforeCallback=function(t){this._durationBeforeCallback=t},Object.defineProperty(t.prototype,"aceEditor",{get:function(){return this.editor},enumerable:!0,configurable:!0}),t.decorators=[{type:e.Directive,args:[{selector:"[ace-editor]"}]}],t.ctorParameters=function(){return[{type:e.ElementRef}]},t.propDecorators={textChanged:[{type:e.Output}],textChange:[{type:e.Output}],options:[{type:e.Input}],readOnly:[{type:e.Input}],theme:[{type:e.Input}],mode:[{type:e.Input}],text:[{type:e.Input}],autoUpdateContent:[{type:e.Input}],durationBeforeCallback:[{type:e.Input}]},t}(),a=function(){function t(t){this.textChanged=new e.EventEmitter,this.textChange=new e.EventEmitter,this.style={},this._options={},this._readOnly=!1,this._theme="monokai",this._mode="html",this._autoUpdateContent=!0,this._durationBeforeCallback=0,this._text="",this._onChange=function(t){},this._onTouched=function(){};var o=t.nativeElement;this._editor=ace.edit(o),this._editor.$blockScrolling=1/0}return t.prototype.ngOnInit=function(){this.init(),this.initEvents()},t.prototype.init=function(){this.setOptions(this._options||{}),this.setTheme(this._theme),this.setMode(this._mode),this.setReadOnly(this._readOnly)},t.prototype.initEvents=function(){var t=this;this._editor.on("change",function(){return t.updateText()}),this._editor.on("paste",function(){return t.updateText()})},t.prototype.updateText=function(){var t=this._editor.getValue(),e=this;t!==this.oldText&&(this._durationBeforeCallback?(this.timeoutSaving&&clearTimeout(this.timeoutSaving),this.timeoutSaving=setTimeout(function(){e._text=t,e.textChange.emit(t),e.textChanged.emit(t),e.timeoutSaving=null},this._durationBeforeCallback)):(this._text=t,this.textChange.emit(t),this.textChanged.emit(t),this._onChange(t)),this.oldText=t)},Object.defineProperty(t.prototype,"options",{set:function(t){this.setOptions(t)},enumerable:!0,configurable:!0}),t.prototype.setOptions=function(t){this._options=t,this._editor.setOptions(t||{})},Object.defineProperty(t.prototype,"readOnly",{set:function(t){this.setReadOnly(t)},enumerable:!0,configurable:!0}),t.prototype.setReadOnly=function(t){this._readOnly=t,this._editor.setReadOnly(t)},Object.defineProperty(t.prototype,"theme",{set:function(t){this.setTheme(t)},enumerable:!0,configurable:!0}),t.prototype.setTheme=function(t){this._theme=t,this._editor.setTheme("ace/theme/"+t)},Object.defineProperty(t.prototype,"mode",{set:function(t){this.setMode(t)},enumerable:!0,configurable:!0}),t.prototype.setMode=function(t){this._mode=t,"object"==typeof this._mode?this._editor.getSession().setMode(this._mode):this._editor.getSession().setMode("ace/mode/"+this._mode)},Object.defineProperty(t.prototype,"value",{get:function(){return this.text},set:function(t){this.setText(t)},enumerable:!0,configurable:!0}),t.prototype.writeValue=function(t){this.setText(t)},t.prototype.registerOnChange=function(t){this._onChange=t},t.prototype.registerOnTouched=function(t){this._onTouched=t},Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(t){this.setText(t)},enumerable:!0,configurable:!0}),t.prototype.setText=function(t){null!==t&&void 0!==t||(t=""),this._text!==t&&!0===this._autoUpdateContent&&(this._text=t,this._editor.setValue(t),this._onChange(t),this._editor.clearSelection())},Object.defineProperty(t.prototype,"autoUpdateContent",{set:function(t){this.setAutoUpdateContent(t)},enumerable:!0,configurable:!0}),t.prototype.setAutoUpdateContent=function(t){this._autoUpdateContent=t},Object.defineProperty(t.prototype,"durationBeforeCallback",{set:function(t){this.setDurationBeforeCallback(t)},enumerable:!0,configurable:!0}),t.prototype.setDurationBeforeCallback=function(t){this._durationBeforeCallback=t},t.prototype.getEditor=function(){return this._editor},t.decorators=[{type:e.Component,args:[{selector:"ace-editor",template:"",styles:[":host { display:block;width:100%; }"],providers:[{provide:r.NG_VALUE_ACCESSOR,useExisting:e.forwardRef(function(){return t}),multi:!0}]}]}],t.ctorParameters=function(){return[{type:e.ElementRef}]},t.propDecorators={textChanged:[{type:e.Output}],textChange:[{type:e.Output}],style:[{type:e.Input}],options:[{type:e.Input}],readOnly:[{type:e.Input}],theme:[{type:e.Input}],mode:[{type:e.Input}],value:[{type:e.Input}],text:[{type:e.Input}],autoUpdateContent:[{type:e.Input}],durationBeforeCallback:[{type:e.Input}]},t}(),u=[a,s],p=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{declarations:u.slice(),imports:[],providers:[],exports:u}]}],t.ctorParameters=function(){return[]},t}();t.AceEditorDirective=s,t.AceEditorComponent=a,t.AceEditorModule=p,Object.defineProperty(t,"__esModule",{value:!0})});